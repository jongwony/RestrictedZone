# Python 정규표현식 re 모듈

re(Regular Expression) 모듈 문자열 검색, 치환, 분리 기능 제공

## Grammar

| 특수문자 | 의미 |
|:----- | :----- |
| . | 개행 문자를 제외한 하나의 문자. re.DOTALL이 설정되어 있으면 개행을 포함한 하나의 문자를 나타낸다.
| ^ | 문자열의 시작을 나타낸다. re.MULTILINE이 설정되어 있으면 매 라인마다 매치된다. |
| $ | 문자열의 종료를 나타낸다. re.MULTILINE이 설정되어 있으면 매 라인마다 매치된다. |
| [] | 문자의 집합을 나타낸다. [abcd]를 예로 들면 'a', 'b', 'c', 'd' 중 **하나의 문자**와 매치된다. [a-d]로도 쓸 수 있다. [\^5] 와 같이 문자 안에 '^'가 쓰이는 경우는 5를 제외한 모든 문자를 나타낸다. [$]는 문자열의 종료를 나타내는 대신 순수 '$'문자를 나타낸다. |
| \| | 'A\|B'로 표기할 경우 'A' or 'B'를 나타낸다(OR 연산) |
| () | 괄호 안의 정규식을**그룹**으로 만든다. 직접 '(',')'(괄호)를 매칭시키기 위해 '\\(','\\)' 또는 '[(]','[)]'형식으로 나타낸다. |
| \* | 문자가 0회 이상 반복됨을 나타낸다. |
| \+ | 문자가 1회 이상 반복됨을 나타낸다. |
| ? | 문자가 0회 혹은 1회 반복됨을 나타낸다. |
| {n} | 문자가 n번 반복됨을 나타낸다. |
| {m, n} | 문자가 m회부터 n회까지 반복되는 모든 경우를 나타낸다. |
| {m, } | 문자가 m회부터 무한 반복되는 모든 경우를 나타낸다. |

## Escape Sequence

| 종류 | 설명 |
|:---- |:---- |
| \\w | 유니코드: 숫자, 밑줄('_')을 포함하는 모든언어의 표현 가능한 문자. 아스키코드: '[a-zA-Z0-9_]'와 동일 |
| \\W | 유니코드: 숫자, 밑줄과 표현 가능한 문자를 제외한 나머지 문자.  아스키코드: '[\^a-zA-Z0-9_]와 동일 |
| \\d | 유니코드: [0-9]를 포함하는 모든 숫자 아스키코드: [0-9]와 동일 |
| \\D | 유니코드: 숫자를 제외한 모든 문자. 아스키코드: [\^0-9]와 동일 |
| \\s | 유니코드: [\\t\\n\\r\\f\\v]를 포함하는 공백 문자. 아스키코드: [\\t\\n\\r\\f\\v]와 동일 |
| \\S | 유니코드: 공백문자를 제외한 모든 문자. 아스키코드: [\^ \\t\\n\\r\\f\\v]와 동일 |
| \\b | 단어의 시작과 끝의 빈 공백. |
| \\B | 단어의 시작과 끝이 아닌 빈 공백. |
| \\\\ | \\ 문자 자체를 의미 |
| \\[숫자] | 지정된 숫자만큼 일치하는 문자열을 의미 |
| \\A | 문자열의 시작 |
| \\Z | 문자열의 끝 |

## re module function

| 함수 | 설명 |
|:---- | :----|
| re.search(pattern, string[, flags]) | string 전체에 대해 pattern이 존재하는지 검사해 MatchObject 인스턴스를 반환 | 
| re.match(pattern, string[, flags]) | string이 시작하는 부분부터 pattern이 존재하는지 검사해 MatchObject 인스턴스를 반환 |
| re.split(pattern, string[, flags]) | pattern을 구분자로 string을 분리해 리스트를 반환 |
| re.findall(pattern, string[, flags]) | string에서 pattern과 매치되는 모든 경우를 찾아 리스트로 반환 |
| re.finditer(pattern, string[, flags]) | string에서 pattern과 일치하는 결과에 대한 이터레이터 객체를 반환 |
| re.sub(pattern, repl, string[, count]) | string에서pattern과 일치하는 부분에 대해 repl로 교체해서 결과 문자열을 반환 |
| re.subn(pattern, repl, string[, count]) | re.sub() 함수와 동일하게 동작하나 결과 문자열, 매칭횟수를 튜플로 반환 |
| re.escape(string) | 영문자, 숫자가 아닌 문자에 대해 백슬래시 문자를 추가한다. 메타문자를 포함한 문자열을 정규식으로 변경 가능 |
| re.compile(pattern[, flags]) | pattern을 컴파일 해서 '정규표현식 객체'를 반환한다. |

정규표현식 내의 escape는 '\\\\\\\\'로, 일반문자는 '\\\\'로 사용해서 표현한다.

또는 정규표현식 앞에 r'\\\\'처럼 간단하게 표현할 수 있다.

```python
>>> bool(re.search("\\\\\w+", "\\apple"))
>>> bool(re.search(r"\\\w+", r"\apple"))
```

위 두 표현은 같다.

## 정규표현식 객체

동일한 정규식을 사용할경우 매번 pattern을 분석하지 않도록 객체로서 사용

```python
>>> import re
>>> c = re.compile(r"app\w*")
>>> c.findall("iTunes is apple application")
['apple','application']
```

위와 같이 findall 함수를 pattern의 분석 없이 검색

search, match, split, findall, finditer, sub, subn 함수를 사용할 수 있음

compile() 함수로 분석하는경우 추가적인 플래그 사용가능

| 플래그 | 설명 |
| :---- | :---- |
| re.I(GNORECASE) | 대소문자를 구분하지 않고 매칭 수행 |
| re.M(ULTILINE) | 문자열이 여러 라인일 경우 '^'는 각 행의 처음을, '$'는 각행의 마지막을 나타낸다. 기본값으로 '^' 첫행의 처음, '$' 마지막행의 마지막만 나타낸다. |
| re.S, re.DOTALL | 개행문자도 '.'으로 매칭된다. 기본값은 매칭되지 않는다. |
| re.X, re.VERBOSE | 정규표현식을 보기 쉽게 작성가능 '#'으로 시직되는 파이썬 주석과 빈 공백은 무시된다. |
| re.A(SCII) | '\\w', '\\W', '\\b', '\\B', '\\s', '\\S'는 유니코드 대신 아스키 코드만 매칭된다. |
| re.L(OCALE) | '\\w', '\\W', '\\b', '\\B', '\\s', '\\S'는 현재 로케일 설정을 따른다. |

htmltitle.py 참조


>".\*" Greedy방식 : 조건을 만족하는 가장 긴 문자열

>".\*?" Lazy(Non-greedy)방식 : 조건을 만족하는 가장 짧은 문자열

```python
>>> greedy = re.compile(r'<.*>', re.I|re.S)
>>> len(greedy.findall(html))
1
>>> lazy = re.compile(r'<.*?>', re.I|re.S)
>>> len(lazy.findall(html))
469
```

## Match 객체

Match(), search()의 결과로 생성

| 메서드 | 내용 |
|:------|:------|
| group([group1, ...]) | 입력받은 인덱스에 해당하는 매칭된 문자열 결과의 부분집합을 반환한다. 인덱스가 0 또는 입력되지 않은 경우 전체 매칭 문자열을 반환한다. |
| groups() | 매칭된 결과를 튜플 형태로 반환 |
| groupdict() | 이름이 붙여진 매칭 결과를 사전 형식으로 반환 |
| start([group]) | 매칭된 결과 문자열의 시작 인덱스를 반환한다. 인자로 부분 집합의 번호나 명시된 이름이 전달된 경우 그에 해당하는 시작 인덱스를 반환한다. |
| end([group]) | 매칭된 결과 문자열의 종료 인덱스를 반환한다. 인자로 부분집합의 번호나 명시된 이름이 전달된 경우, 그에 해당하는 종료 인덱스를 반환한다. |

| 속성 | 내용 |
|:----|:----|
| pos | 원본 문자열에서 검색을 시작하는 위치 |
| endpos | 원본 문자열에서 검색을 종료하는 위치 |
| lastindex | 매칭 결과 집합에서 마지막 인덱스 번호를 반환한다. 일치된 결과가 없는 경우에는 None을 반환한다. |
| lastgroup | 매칭된 결과 집합에서 마지막으로 일치한 이름을 반환한다. 정규식의 매칭조건에 이름이 지정되지 않았거나 일치된 결과가 없는 경우에는 None을 반환한다. |
| string | 매칭의 대상이 되는 원본 문자열 |


